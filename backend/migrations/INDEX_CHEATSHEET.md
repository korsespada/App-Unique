# üìö –®–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ –∏–Ω–¥–µ–∫—Å–∞–º –ë–î

## üéØ –ß—Ç–æ —Ç–∞–∫–æ–µ –∏–Ω–¥–µ–∫—Å?

**–ü—Ä–æ—Å—Ç—ã–º–∏ —Å–ª–æ–≤–∞–º–∏:** –ò–Ω–¥–µ–∫—Å ‚Äî —ç—Ç–æ –æ–≥–ª–∞–≤–ª–µ–Ω–∏–µ –≤ –∫–Ω–∏–≥–µ.

### –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞:
```
–ù–∞–π—Ç–∏ "Nike" –≤ 10,000 —Ç–æ–≤–∞—Ä–∞—Ö:
[1] ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º ‚Üí –Ω–µ—Ç
[2] ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º ‚Üí –Ω–µ—Ç
[3] ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º ‚Üí –¥–∞! ‚úì
...
[10000] ‚Üí –ø—Ä–æ–≤–µ—Ä—è–µ–º ‚Üí –Ω–µ—Ç

‚è±Ô∏è –í—Ä–µ–º—è: 10 —Å–µ–∫—É–Ω–¥
```

### –° –∏–Ω–¥–µ–∫—Å–æ–º:
```
–ò–Ω–¥–µ–∫—Å –≥–æ–≤–æ—Ä–∏—Ç: "Nike –Ω–∞ –ø–æ–∑–∏—Ü–∏—è—Ö: 45, 127, 389"
[45] ‚Üí –±–µ—Ä—ë–º ‚úì
[127] ‚Üí –±–µ—Ä—ë–º ‚úì
[389] ‚Üí –±–µ—Ä—ë–º ‚úì

‚è±Ô∏è –í—Ä–µ–º—è: 0.01 —Å–µ–∫—É–Ω–¥—ã
üöÄ –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 1000x
```

---

## üìä –¢–≤–æ–∏ –∏–Ω–¥–µ–∫—Å—ã (—á—Ç–æ –æ–Ω–∏ –¥–µ–ª–∞—é—Ç)

### 1. **brands(name)** –∏ **categories(name)**
```sql
-- –ó–∞–ø—Ä–æ—Å: "–ù–∞–π–¥–∏ –±—Ä–µ–Ω–¥ –ø–æ –∏–º–µ–Ω–∏"
SELECT * FROM brands WHERE name = 'Nike';
```
**–ë–µ–∑ –∏–Ω–¥–µ–∫—Å–∞:** –ß–∏—Ç–∞–µ–º –≤—Å–µ –±—Ä–µ–Ω–¥—ã  
**–° –∏–Ω–¥–µ–∫—Å–æ–º:** –°—Ä–∞–∑—É –Ω–∞—Ö–æ–¥–∏–º  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 50x

---

### 2. **profiles(telegramid)** ‚Äî UNIQUE
```sql
-- –ó–∞–ø—Ä–æ—Å: "–ù–∞–π–¥–∏ –ø—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è"
SELECT * FROM profiles WHERE telegramid = '123456789';
```
**UNIQUE** = –æ–¥–∏–Ω Telegram ID –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–æ–ª—å–∫–æ —É –æ–¥–Ω–æ–≥–æ –ø—Ä–æ—Ñ–∏–ª—è  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 100x

---

### 3. **products(status, updated)**
```sql
-- –ó–∞–ø—Ä–æ—Å: "–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã, –Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏"
SELECT * FROM products 
WHERE status = 'active' 
ORDER BY updated DESC;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–∞—Ç–∞–ª–æ–≥–∞  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 200x

---

### 4. **products(status, name)**
```sql
-- –ó–∞–ø—Ä–æ—Å: "–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã –ø–æ –∞–ª—Ñ–∞–≤–∏—Ç—É"
SELECT * FROM products 
WHERE status = 'active' 
ORDER BY name;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ –∏–º–µ–Ω–∏  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 150x

---

### 5. **products(brand, status, updated)** ‚≠ê –°–ê–ú–´–ô –ú–û–©–ù–´–ô
```sql
-- –ó–∞–ø—Ä–æ—Å: "–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ —Ç–æ–≤–∞—Ä—ã Nike, –Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏"
SELECT * FROM products 
WHERE brand = 'Nike' AND status = 'active' 
ORDER BY updated DESC;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä –ø–æ –±—Ä–µ–Ω–¥—É –≤ –∫–∞—Ç–∞–ª–æ–≥–µ  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 500x

---

### 6. **products(category, status, updated)** ‚≠ê –°–ê–ú–´–ô –ú–û–©–ù–´–ô
```sql
-- –ó–∞–ø—Ä–æ—Å: "–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ –∫—Ä–æ—Å—Å–æ–≤–∫–∏, –Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏"
SELECT * FROM products 
WHERE category = '–ö—Ä–æ—Å—Å–æ–≤–∫–∏' AND status = 'active' 
ORDER BY updated DESC;
```
**–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –∫–∞—Ç–∞–ª–æ–≥–µ  
**–£—Å–∫–æ—Ä–µ–Ω–∏–µ:** 500x

---

## üîë –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ: –ò–Ω–¥–µ–∫—Å —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–ª–µ–≤–∞ –Ω–∞–ø—Ä–∞–≤–æ

### –ò–Ω–¥–µ–∫—Å: **(brand, status, updated)**

#### ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:
```sql
WHERE brand = 'Nike'                                    -- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 1 –ø–æ–ª–µ
WHERE brand = 'Nike' AND status = 'active'              -- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 2 –ø–æ–ª—è
WHERE brand = 'Nike' AND status = 'active' ORDER BY updated -- –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 3 –ø–æ–ª—è
```

#### ‚ùå –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ:
```sql
WHERE status = 'active'              -- status –Ω–µ –ø–µ—Ä–≤—ã–π –≤ –∏–Ω–¥–µ–∫—Å–µ
WHERE updated > '2024-01-01'         -- updated –Ω–µ –ø–µ—Ä–≤—ã–π –≤ –∏–Ω–¥–µ–∫—Å–µ
WHERE status = 'active' AND updated  -- –ø—Ä–æ–ø—É—â–µ–Ω brand (–ø–µ—Ä–≤–æ–µ –ø–æ–ª–µ)
```

---

## üí° –ü–æ—á–µ–º—É —Å–æ—Å—Ç–∞–≤–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã –ª—É—á—à–µ?

### –ë—ã–ª–æ (–∏–∑–±—ã—Ç–æ—á–Ω–æ):
```sql
CREATE INDEX idx1 ON products(brand);              -- 3 –∏–Ω–¥–µ–∫—Å–∞
CREATE INDEX idx2 ON products(brand, status);      -- –∑–∞–Ω–∏–º–∞—é—Ç –º–µ—Å—Ç–æ
CREATE INDEX idx3 ON products(brand, status, updated);
```

### –°—Ç–∞–ª–æ (–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ):
```sql
CREATE INDEX idx ON products(brand, status, updated); -- 1 –∏–Ω–¥–µ–∫—Å
-- –ü–æ–∫—Ä—ã–≤–∞–µ—Ç –≤—Å–µ 3 —Å–ª—É—á–∞—è –≤—ã—à–µ!
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –ú–µ–Ω—å—à–µ –º–µ—Å—Ç–∞ –Ω–∞ –¥–∏—Å–∫–µ
- ‚úÖ –ë—ã—Å—Ç—Ä–µ–µ INSERT/UPDATE (–º–µ–Ω—å—à–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –æ–±–Ω–æ–≤–ª—è—Ç—å)
- ‚úÖ –¢–∞ –∂–µ —Å–∫–æ—Ä–æ—Å—Ç—å SELECT

---

## üìà –†–µ–∞–ª—å–Ω—ã–µ —Ü–∏—Ñ—Ä—ã –∏–∑ —Ç–≤–æ–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

### –ó–∞–ø—Ä–æ—Å: "–ü–æ–∫–∞–∂–∏ –∞–∫—Ç–∏–≤–Ω—ã–µ Nike, –Ω–æ–≤—ã–µ –ø–µ—Ä–≤—ã–º–∏"
```javascript
// backend/src/index.js
const filter = 'status = "active" && brand = "Nike"';
const products = await listActiveProducts(page, perPage, filter);
```

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:

| –ú–µ—Ç—Ä–∏–∫–∞ | –ë–µ–∑ –∏–Ω–¥–µ–∫—Å–æ–≤ | –° –∏–Ω–¥–µ–∫—Å–∞–º–∏ | –£–ª—É—á—à–µ–Ω–∏–µ |
|---------|--------------|-------------|-----------|
| –í—Ä–µ–º—è –∑–∞–ø—Ä–æ—Å–∞ | 5-10 —Å–µ–∫ | 0.01-0.05 —Å–µ–∫ | **200-1000x** |
| CPU –Ω–∞–≥—Ä—É–∑–∫–∞ | 80-100% | 5-10% | **10x –º–µ–Ω—å—à–µ** |
| –ó–∞–ø–∏—Å–µ–π –ø—Ä–æ—á–∏—Ç–∞–Ω–æ | 10,000 | 50-100 | **100x –º–µ–Ω—å—à–µ** |

---

## üéÆ –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –∏–Ω–¥–µ–∫—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è?

### –í PocketBase Admin UI:
```sql
EXPLAIN QUERY PLAN
SELECT * FROM products 
WHERE brand = 'Nike' AND status = 'active' 
ORDER BY updated DESC;
```

### –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
SEARCH products USING INDEX idx_products_brand_status_updated (brand=? AND status=?)
```

–ï—Å–ª–∏ –≤–∏–¥–∏—à—å `SCAN TABLE` ‚Äî –∏–Ω–¥–µ–∫—Å –ù–ï –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è! ‚ùå

---

## ‚ö†Ô∏è –ö–æ–≥–¥–∞ –ù–ï –Ω—É–∂–Ω—ã –∏–Ω–¥–µ–∫—Å—ã?

1. **–ú–∞–ª–µ–Ω—å–∫–∏–µ —Ç–∞–±–ª–∏—Ü—ã** (<1000 –∑–∞–ø–∏—Å–µ–π) ‚Äî –∏–Ω–¥–µ–∫—Å –º–µ–¥–ª–µ–Ω–Ω–µ–µ, —á–µ–º –ø–æ–ª–Ω–æ–µ —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
2. **–ü–æ–ª—è, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –º–µ–Ω—è—é—Ç—Å—è** ‚Äî –∫–∞–∂–¥—ã–π UPDATE –æ–±–Ω–æ–≤–ª—è–µ—Ç –∏–Ω–¥–µ–∫—Å
3. **–ü–æ–ª—è —Å –º–∞–ª—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π** ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä, `gender` (M/F)

---

## üöÄ –ò—Ç–æ–≥

### –£ —Ç–µ–±—è —Å–µ–π—á–∞—Å:
- ‚úÖ 7 –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ –ü–æ–∫—Ä—ã–≤–∞—é—Ç –≤—Å–µ —á–∞—Å—Ç—ã–µ –∑–∞–ø—Ä–æ—Å—ã
- ‚úÖ –ù–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö –∏–Ω–¥–µ–∫—Å–æ–≤
- ‚úÖ –£—Å–∫–æ—Ä–µ–Ω–∏–µ: 100-500x

### –†–µ–∑—É–ª—å—Ç–∞—Ç:
- üéØ –ë—ã—Å—Ç—Ä–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ç–∞–ª–æ–≥–∞
- üéØ –ú–≥–Ω–æ–≤–µ–Ω–Ω–∞—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –±—Ä–µ–Ω–¥—É/–∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- üéØ –ù–∏–∑–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- üéØ –°—á–∞—Å—Ç–ª–∏–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏! üòä
